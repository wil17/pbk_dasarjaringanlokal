(this["webpackJsonpall-in-one"]=this["webpackJsonpall-in-one"]||[]).push([[0],{775:function(e,t){var n=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,r=/^0o[0-7]+$/i,a=/^(?:0|[1-9]\d*)$/,o=parseInt,c=Object.prototype.toString,l=Math.ceil,d=Math.max;function u(e,t,n){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(i);++s<i;)r[s]=e[s+t];return r}function p(e,t,n){if(!h(n))return!1;var s=typeof t;return!!("number"==s?function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=h(e)?c.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}(n)&&function(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}(t,n.length):"string"==s&&t in n)&&function(e,t){return e===t||e!==e&&t!==t}(n[t],e)}function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e,t,a){t=(a?p(e,t,a):void 0===t)?1:d(function(e){var t=function(e){if(!e)return 0===e?e:0;if((e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==c.call(e)}(e))return NaN;if(h(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=h(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=i.test(e);return a||r.test(e)?o(e.slice(2),a?2:8):s.test(e)?NaN:+e}(e))===1/0||e===-1/0){return 17976931348623157e292*(e<0?-1:1)}return e===e?e:0}(e),a=t%1;return t===t?a?t-a:t:0}(t),0);var m=e?e.length:0;if(!m||t<1)return[];for(var v=0,f=0,b=Array(l(m/t));v<m;)b[f++]=u(e,v,v+=t);return b}},837:function(e,t,n){"use strict";n.r(t);var s=n(121),i=n.n(s),r=n(220),a=n(6),o=n(138),c=n(61),l=n.n(c),d=n(36),u=n(129),p=n(313),h=n(39),m=n(12),v=n(77);const f=function(e){let t=e.section,n=e.xapiStatus,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{verb:Object(v.d)(n)?u.i.progressed:u.i.mastered,object:Object(p.c)(t,s),result:Object(p.b)({score:t.score})}};var b=n(4),S=n(92),x=n(198),g=e=>{let t=e.question;return{response:t.answers.filter(e=>t.response.indexOf(e.id)>=0).map(e=>e.id).join(u.h.comma),correctResponsesPattern:t.type===m.k?t.correctAnswerId:t.answers.filter(e=>e.isCorrect).map(e=>e.id).join(u.h.comma),interactionType:u.f.choice,extraActivityDefinition:{choices:t.answers.map(e=>({id:e.id,description:{"en-US":t.type===m.k||t.type===m.f?Object(x.e)(e.originalImage):e.text}}))}}},y=n(136);var E=e=>{let t=e.question,n=e.questionContent;const s=t.response,i=t.answerGroups,r=s.data,a=void 0===r?(e=>e.reduce((e,t)=>{let n=t.id;return Object(b.a)({[n]:""},e)},{}))(i):r,o=Object.keys(a).map(e=>"".concat(a[e]).concat(u.h.dot).concat(e)).join(u.h.comma),c=i.map(e=>e.answers.filter(e=>e.isCorrect).map(t=>"".concat(t.text).concat(u.h.dot).concat(e.id)).join(u.h.comma)).join(u.h.comma),l=Object(d.a)(n,1)[0],p=void 0===l?{value:""}:l;return{response:o,correctResponsesPattern:c,interactionType:u.f.fillIn,extensions:{[u.d.content]:Object(y.e)(p.value)}}},L=e=>({response:e.question.response.answeredText,omitScore:!0,interactionType:u.f.other}),O=e=>{let t=e.question;return{response:t.response.map(e=>"".concat(e.id).concat(u.h.dot).concat(e.isCorrect)).join(u.h.comma),correctResponsesPattern:t.answers.map(e=>"".concat(e.id).concat(u.h.dot).concat(e.isCorrect)).join(u.h.comma),interactionType:u.f.choice,extraActivityDefinition:{choices:t.answers.map(e=>({id:e.id,description:{"en-US":e.text}}))}}},w=e=>{let t=e.question,n=e.isXapiPackageMode;return{response:t.response.map(e=>e.id).join(u.h.comma),correctResponsesPattern:t.answers.map(e=>e.id).join(u.h.comma),interactionType:n?u.f.sequencing:u.f.choice,extraActivityDefinition:{choices:t.answers.map(e=>({id:e.id,description:{"en-US":e.text}}))}}},j=e=>{let t=e.question;const n=e=>e.map((e,t)=>({id:t.toString(),description:{"en-US":e}})),s=t.answers.map(e=>e.key),i=t.answers.map(e=>e.value).filter((e,t,n)=>n.indexOf(e)===t),r=t.answers.map(e=>"".concat(s.indexOf(e.key)).concat(u.h.dot).concat(i.indexOf(e.value))).join(u.h.comma);return{response:s.map((e,n)=>{const s=t.response.find(t=>t.key===e);let r="";return s&&s.shownSelectedValue&&(r=i.indexOf(s.shownSelectedValue)),"".concat(n).concat(u.h.dot).concat(r)}).join(u.h.comma),correctResponsesPattern:r,interactionType:u.f.matching,extraActivityDefinition:{source:n(s),target:n(i)}}},P=()=>({interactionType:u.f.other});var A=e=>{let t=e.question;const n=t.dropspots.map(e=>e.text).join(u.h.comma),s=t.dropspots.map(e=>"(".concat(e.x,",").concat(e.y,")")).join(u.h.comma);return{response:t.dropspots.map(e=>{const n=t.response.find(t=>t.id===e.id);if(!n)return"(-1,-1)";const s=n.items.length&&n.items[0];if(!s)return"(-1,-1)";const i=t.dropspots.find(e=>e.id===s.id);return"(".concat(i.x,",").concat(i.y,")")}).join(u.h.comma),correctResponsesPattern:s,interactionType:u.f.other,extensions:{[u.d.imageUrl]:Object(x.e)(t.originalBackground),[u.d.answerTexts]:n}}},H=e=>{let t=e.question;return{response:t.response.map(e=>"(".concat(e.x,",").concat(e.y,")")).join(u.h.comma),correctResponsesPattern:t.spots.map(e=>e.map(e=>"(".concat(e.x,",").concat(e.y,")")).join(u.h.dot)).join(u.h.comma),interactionType:u.f.other,extensions:{[u.d.imageUrl]:Object(x.e)(t.originalBackground)}}};const N=(e,t)=>{let n=Object(d.a)(e,3),s=n[0],i=n[1],r=n[2];return C(s,i,t,function(e){switch(e.type){case m.j:case m.e:case m.k:case m.f:return g;case m.b:return E;case m.g:return L;case m.l:return O;case m.h:return w;case m.m:return j;case m.i:return P;case m.a:return A;case m.c:return H;default:throw new Error("Question type ".concat(e.type," is not supported"))}}(s)({question:s,questionContent:r,isXapiPackageMode:t}))};function C(e,t,n,s){const i=s.response,a=s.correctResponsesPattern,o=s.interactionType,c=s.extraActivityDefinition,d=s.omitScore,h=s.extensions,m=s.verb,v=function(e,t,n){return r.a.extendContext(new l.a.Context({contextActivities:new l.a.ContextActivities({parent:[Object(p.c)(t,n)]}),extensions:{[u.d.surveyMode]:e.hasOwnProperty("isSurvey")&&e.isSurvey,[u.d.questionType]:e.type}}),n)}(e,t,n);v.extensions=Object.assign(v.extensions,h);let f=Object(b.a)({name:{"en-US":e.title},type:u.a.interaction,interactionType:o},a&&{correctResponsesPattern:e.isSurvey?[]:[a]});return f=Object.assign(f,c),{context:v,verb:m||u.i.answered,object:new l.a.Activity({id:Object(S.d)(t.id,e.id,n),definition:new l.a.ActivityDefinition(f)}),result:Object(p.b)({score:e.score,omitScore:d,response:i})}}const R=(e,t)=>{let n=Object(d.a)(e,2);return C(n[0],n[1],t,{interactionType:u.f.other,verb:u.i.experienced})},T={[h.b.PASSED]:u.i.passed,[h.b.FAILED]:u.i.failed,[h.b.IN_PROGRESS]:u.i.progressed},U=(e,t)=>(Object(d.a)(e,1)[0].type===m.d?R:N)(e,t),_=e=>e&&u.i.hasOwnProperty(e)?{verb:u.i[e]}:{verb:u.i.started},I=()=>({verb:u.i.launched}),z=e=>e&&u.i.hasOwnProperty(e)?{verb:u.i[e]}:{verb:u.i.completed},D=e=>{let t=e.course;return{verb:u.i.completed,result:Object(p.b)({score:t.score})}},X=(e,t)=>{let n=e.course,s=e.timeSpent,i=e.xapiStatus;const r={score:n.score,duration:s};return i!==h.b.IN_PROGRESS&&t&&(r.completion=!0,r.success=i===h.b.PASSED),{verb:T[i],result:Object(p.b)(r)}},q=e=>{let t=e.statementsData,n=e.state,s=e.isSubmitOnce,i=void 0!==s&&s,r=e.isXapiPackageMode,a=void 0!==r&&r,o=e.shouldSendCompletedStatement;const c=void 0!==o&&o?[D({course:n.course})]:[];if(!i){return[...t.map(e=>{let t=e.section,n=e.questionData,s=e.course;return[t?f(t,a):[],n?U(n,a):[],X(s,a)]}).flat(2),...c]}const l=Object(d.a)(t,3),u=l[0],p=l[1],h=l[2];return[...u.map(e=>U(e,a)),...p.map(e=>f(e,a)),X(h,a),...c]},k=e=>{let t=e.score,n=e.response;return{verb:u.i.evaluated,result:Object(p.b)({score:t,response:n})}};var M=new class{constructor(){this.courseLaunched=void 0,this.courseStarted=void 0,this.informationContentExperienced=void 0,this.questionAnswered=void 0,this.overallCourseProgressed=void 0,this.courseCompleted=void 0,this.courseEvaluated=void 0,this.listStatement=void 0,this.listStatement=[{name:"courseLaunched",instance:I},{name:"courseStarted",instance:_},{name:"informationContentExperienced",instance:R},{name:"questionAnswered",instance:N},{name:"overallCourseProgressed",instance:q},{name:"courseCompleted",instance:z},{name:"courseEvaluated",instance:k}],this.listStatement.forEach(e=>{this[e.name]=function(){const t=[e.instance(...arguments)].flat();return t.map(e=>new l.a.Statement(e))}})}},V=e=>{console.error("xApi error: [ ".concat($(e)," ]"))};function F(e){console.error("xApi error: [ ".concat($(e)," ]"))}function $(e){return e?e.code&&e.mesg?"code: ".concat(e.code,", message: ").concat(e.mesg):e.toString():"undefined error"}class B extends o.a{constructor(e){let t=e.sendStatement,n=e.shouldHandlerErrors;super(),this.handlers=void 0,this.sendStatement=void 0,this.shouldHandlerErrors=void 0,this.handlers=[],this.sendStatement=t,this.shouldHandlerErrors=n}createHandler(e){return async t=>{await this.handle(e,t)}}async handle(e,t){try{const n=M[e](t);await this.sendStatement(n)}catch(n){if(!this.shouldHandlerErrors)throw n;V(n)}}}var G=n(51),Q=n(775),J=n.n(Q);var W=class{constructor(){this.statements=void 0,this.statements=[]}push(e){this.statements.push(...[e].flat())}shift(){const e=this.statements;return this.statements=[],e}};let K=!0;var Y=new class{constructor(){this.settings=void 0,this.promises=void 0,this.xapiLmsPromises=void 0,this.lrsStatementStorage=void 0,this.xapiLmsStatementsStorage=void 0}initialize(e){this.settings=e,this.promises=[],this.lrsStatementStorage=new W}initializeXapiLms(e){this.settings=e,this.xapiLmsPromises=[],this.xapiLmsStatementsStorage=new W}sendLrsStatements(e){let t=e;return r.a.isDefaultLrs(this.settings.xApi)||(t=this.getAllowedStatements(e,this.settings.xApi.allowedVerbs),t.length)?(this.lrsStatementStorage.push(t),this.sendStorageStatements(this.lrsStatementStorage,this.promises,r.a.lrs),Promise.all(this.promises)):null}sendNpsStatement(e){this.doSend(r.a.nps.sendStatements.bind(r.a.nps),e)}sendLxpStatement(e){this.doSend(r.a.lxp.sendStatements.bind(r.a.lxp),e)}sendXapiLmsStatements(e){const t=this.getAllowedStatements(e,this.settings.xApi.lmsAllowedVerbs);return t.length?(this.xapiLmsStatementsStorage.push(t),this.sendStorageStatements(this.xapiLmsStatementsStorage,this.xapiLmsPromises,r.a.xapiLms),Promise.all(this.xapiLmsPromises)):null}getAllowedStatements(e,t){return e.filter(e=>t.includes(e.verb.display["en-US"]))}sendStorageStatements(e,t,n){const s=e.shift();if(0!==s.length){const e=J()(s,10).map(e=>this.doSend(n.sendStatements.bind(n),e));t.push(e)}}doSend(e,t){return new Promise((n,s)=>{e(t,e=>{if(e){const t=e.find(e=>null!==e.err);t?s(t.err):(!K&&a.a.emit(a.b.APP_ONLINE),K=!0,n())}})}).catch(()=>{setTimeout(()=>{K&&a.a.emit(a.b.APP_OFFLINE_OR_SERVER_ERROR),K=!1,this.doSend(e,t)},G.a)})}};class Z extends B{constructor(){super({sendStatement:Y.sendLrsStatements.bind(Y),shouldHandlerErrors:!0})}initialize(e){let t=e.isScoringOfContentPagesAllowed;this.handlers=[{event:a.b.COURSE_SUBMIT,instance:this.createHandler("overallCourseProgressed")},{event:a.b.COURSE_STARTED,instance:this.createHandler("courseLaunched")},{event:a.b.QUESTION_ANSWERED,instance:this.createHandler("overallCourseProgressed")}],t&&this.handlers.push({event:a.b.INFORMATION_CONTENT_EXPERIENCED,instance:this.createHandler("overallCourseProgressed")})}}class ee extends B{constructor(){super({sendStatement:Y.sendNpsStatement.bind(Y)})}initialize(){this.handlers=[{event:a.b.COURSE_EVALUATED,instance:this.createHandler("courseEvaluated")}]}}class te extends B{constructor(){super({sendStatement:Y.sendLxpStatement.bind(Y)})}initialize(e){this.handlers=Object.keys(e).map(e=>{if(u.c.hasOwnProperty(e)){const t=u.c[e],n=u.e[t];return{event:t,instance:this.createHandler(n)}}return null})}}class ne extends B{constructor(){super({sendStatement:Y.sendXapiLmsStatements.bind(Y),shouldHandlerErrors:!0})}initialize(e){let t=e.isScoringOfContentPagesAllowed;this.handlers=[{event:a.b.COURSE_SUBMIT_XAPI_LMS,instance:this.createHandler("overallCourseProgressed")},{event:a.b.COURSE_STARTED,instance:this.createHandler("courseLaunched")},{event:a.b.QUESTION_ANSWERED_XAPI_LMS,instance:this.createHandler("overallCourseProgressed")}],t&&this.handlers.push({event:a.b.INFORMATION_CONTENT_EXPERIENCED_XAPI_LMS,instance:this.createHandler("overallCourseProgressed")})}}t.default=new class{constructor(){this.lrsEventHandler=void 0,this.npsEventHandler=void 0,this.lxpEventHandler=void 0,this.xapiLmsEventHandler=void 0,this.settings=void 0,this.defaultLrsUrl=void 0,this.defaultNpsUrl=void 0,this.defaultLxpUrl=void 0,this.lrsEventHandler=new Z,this.npsEventHandler=new ee,this.lxpEventHandler=new te,this.xapiLmsEventHandler=new ne}subscribeLrs(){try{r.a.initializeLrs(this.settings.xApi,this.defaultLrsUrl)}catch(e){this.unsubscribeLrs(),V(e)}this.lrsEventHandler.on()}subscribeNps(){try{r.a.initializeNps(this.defaultNpsUrl)}catch(e){this.unsubscribeNps(),F(e)}this.npsEventHandler.on()}subscribeLxp(e){try{r.a.initializeLxp(this.defaultLxpUrl,e)}catch(t){this.unsubscribeLxp(),F(t)}this.lxpEventHandler.on()}subscribeXapiLms(){try{r.a.initializeXapiLms()}catch(e){this.unsubscribeXapiLms(),V(e)}this.xapiLmsEventHandler.on()}unsubscribeLrs(){this.lrsEventHandler.off()}unsubscribeNps(){this.npsEventHandler.off()}unsubscribeLxp(){this.lxpEventHandler.off()}unsubscribeXapiLms(){this.xapiLmsEventHandler.off()}unsubscribeAll(){this.unsubscribeLrs(),this.unsubscribeNps(),this.unsubscribeLxp(),this.unsubscribeXapiLms()}initializeXapiLms(e){let t=e.settings;this.xapiLmsEventHandler.initialize(t),Y.initializeXapiLms(t)}initialize(e){var t;let n=e.settings,s=e.defaultLrsUrl,a=e.defaultNpsUrl,o=e.defaultLxpUrl,c=e.course,l=e.actor;this.settings=n,this.defaultLrsUrl=s,this.defaultNpsUrl=a,this.defaultLxpUrl=o,this.lrsEventHandler.initialize(n),this.npsEventHandler.initialize(),i()(null===(t=n.lxp)||void 0===t?void 0:t.xApiVerbs)||this.lxpEventHandler.initialize(n.lxp.xApiVerbs),r.a.initialize({course:c,actor:l}),Y.initialize(n)}}}}]);